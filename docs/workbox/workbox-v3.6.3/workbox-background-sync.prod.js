this.workbox=this.workbox||{},this.workbox.backgroundSync=function(b,d){"use strict";try{self.workbox.v["workbox:background-sync:3.6.3"]=1}catch(e){}const q=["method","referrer","referrerPolicy","mode","credentials","cache","redirect","integrity","keepalive"];class i{static fromRequest(e){return babelHelpers.asyncToGenerator(function*(){const t={headers:{}};e.method!=="GET"&&(t.body=yield e.clone().blob());for(const[r,s]of e.headers.entries())t.headers[r]=s;for(const r of q)e[r]!==void 0&&(t[r]=e[r]);return new i({url:e.url,requestInit:t})})()}constructor({url:e,requestInit:t,timestamp:r=Date.now()}){this.url=e,this.requestInit=t,this.e=r}get timestamp(){return this.e}toObject(){return{url:this.url,timestamp:this.timestamp,requestInit:this.requestInit}}toRequest(){return new Request(this.url,this.requestInit)}clone(){const e=Object.assign({},this.requestInit);return e.headers=Object.assign({},this.requestInit.headers),this.requestInit.body&&(e.body=this.requestInit.body.slice()),new i({url:this.url,timestamp:this.timestamp,requestInit:e})}}const p="workbox-background-sync",o="requests",u="queueName",h="workbox-background-sync",m=10080;class f{constructor(e){this.t=e,this.r=new b.DBWrapper(p,1,{onupgradeneeded:t=>t.target.result.createObjectStore(o,{autoIncrement:!0}).createIndex(u,u,{unique:!1})})}addEntry(e){var t=this;return babelHelpers.asyncToGenerator(function*(){yield t.r.add(o,{queueName:t.t.name,storableRequest:e.toObject()})})()}getAndRemoveOldestEntry(){var e=this;return babelHelpers.asyncToGenerator(function*(){const[t]=yield e.r.getAllMatching(o,{index:u,query:IDBKeyRange.only(e.t.name),count:1,includeKeys:!0});if(t)return yield e.r.delete(o,t.primaryKey),new i(t.value.storableRequest)})()}}const c=new Set;class y{constructor(e,{callbacks:t={},maxRetentionTime:r=m}={}){if(c.has(e))throw new d.WorkboxError("duplicate-queue-name",{name:e});c.add(e),this.s=e,this.i=t,this.n=r,this.u=new f(this),this.c()}get name(){return this.s}addRequest(e){var t=this;return babelHelpers.asyncToGenerator(function*(){const r=yield i.fromRequest(e.clone());yield t.o("requestWillEnqueue",r),yield t.u.addEntry(r),yield t.l()})()}replayRequests(){var e=this;return babelHelpers.asyncToGenerator(function*(){const t=Date.now(),r=[],s=[];let n;for(;n=yield e.u.getAndRemoveOldestEntry();){const l=n.clone(),g=60*e.n*1e3;if(t-n.timestamp>g)continue;yield e.o("requestWillReplay",n);const a={request:n.toRequest()};try{a.response=yield fetch(a.request.clone())}catch(w){a.error=w,s.push(l)}r.push(a)}if(yield e.o("queueDidReplay",r),s.length)throw yield Promise.all(s.map(function(l){return e.u.addEntry(l)})),new d.WorkboxError("queue-replay-failed",{name:e.s,count:s.length})})()}o(e,...t){var r=this;return babelHelpers.asyncToGenerator(function*(){typeof r.i[e]=="function"&&(yield r.i[e].apply(null,t))})()}c(){"sync"in registration?self.addEventListener("sync",e=>{e.tag===`${h}:${this.s}`&&e.waitUntil(this.replayRequests())}):this.replayRequests()}l(){var e=this;return babelHelpers.asyncToGenerator(function*(){if("sync"in registration)try{yield registration.sync.register(`${h}:${e.s}`)}catch(t){}})()}static get a(){return c}}return Object.freeze({Queue:y,Plugin:class{constructor(...e){this.t=new y(...e),this.fetchDidFail=this.fetchDidFail.bind(this)}fetchDidFail({request:e}){var t=this;return babelHelpers.asyncToGenerator(function*(){yield t.t.addRequest(e)})()}}})}(workbox.core._private,workbox.core._private);
