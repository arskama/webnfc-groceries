this.workbox=this.workbox||{},this.workbox.rangeRequests=function(c,i,l,o){"use strict";try{self.workbox.v["workbox:range-requests:3.6.3"]=1}catch(t){}function p(t,e,r){l.assert.isInstance(t,Blob,{moduleName:"workbox-range-requests",funcName:"calculateEffectiveBoundaries",paramName:"blob"});const a=t.size;if(r>a||e<0)throw new i.WorkboxError("range-not-satisfiable",{size:a,end:r,start:e});let s,n;return e===null?(s=a-r,n=a):r===null?(s=e,n=a):(s=e,n=r+1),{start:s,end:n}}function m(t){l.assert.isType(t,"string",{moduleName:"workbox-range-requests",funcName:"parseRangeHeader",paramName:"rangeHeader"});const e=t.trim().toLowerCase();if(!e.startsWith("bytes="))throw new i.WorkboxError("unit-must-be-bytes",{normalizedRangeHeader:e});if(e.includes(","))throw new i.WorkboxError("single-range-only",{normalizedRangeHeader:e});const r=/(\d*)-(\d*)/.exec(e);if(r===null||!(r[1]||r[2]))throw new i.WorkboxError("invalid-range-values",{normalizedRangeHeader:e});return{start:r[1]===""?null:Number(r[1]),end:r[2]===""?null:Number(r[2])}}let g=(()=>{var t=babelHelpers.asyncToGenerator(function*(e,r){try{l.assert.isInstance(e,Request,{moduleName:"workbox-range-requests",funcName:"createPartialResponse",paramName:"request"}),l.assert.isInstance(r,Response,{moduleName:"workbox-range-requests",funcName:"createPartialResponse",paramName:"originalResponse"});const a=e.headers.get("range");if(!a)throw new i.WorkboxError("no-range-header");const s=m(a),n=yield r.blob(),u=p(n,s.start,s.end),b=n.slice(u.start,u.end),f=b.size,d=new Response(b,{status:206,statusText:"Partial Content",headers:r.headers});return d.headers.set("Content-Length",f),d.headers.set("Content-Range",`bytes ${u.start}-${u.end-1}/`+n.size),d}catch(a){return o.logger.warn("Unable to construct a partial response; returning a 416 Range Not Satisfiable response instead."),o.logger.groupCollapsed("View details here."),o.logger.unprefixed.log(a),o.logger.unprefixed.log(e),o.logger.unprefixed.log(r),o.logger.groupEnd(),new Response("",{status:416,statusText:"Range Not Satisfiable"})}});return function(e,r){return t.apply(this,arguments)}})();class w{cachedResponseWillBeUsed({request:t,cachedResponse:e}){return babelHelpers.asyncToGenerator(function*(){return e&&t.headers.has("range")?yield g(t,e):e})()}}return c.createPartialResponse=g,c.Plugin=w,c}({},workbox.core._private,workbox.core._private,workbox.core._private);
