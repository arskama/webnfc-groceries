/**
 * @license
 * Copyright 2016 Google Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(()=>{var I,v,S;const p=Symbol(),E=Symbol(),w=Symbol(),u=Symbol(),_=Symbol(),M=Symbol(),e=Symbol(),n=Symbol(),o=Symbol(),r=Symbol(),d=Symbol(),f=Symbol(),b=Symbol();class y{constructor(){this[I]=[],this[v]=[],this[S]=new Set}destructor(){this[o](this[w]);const t=this;t[p]=null,t[w]=null,t[E]=null}get top(){const t=this[p];return t[t.length-1]||null}push(t){if(!t||t===this.top)return;this.remove(t),this[M](t),this[p].push(t)}remove(t){const i=this[p].indexOf(t);return i===-1?!1:(this[p].splice(i,1),i===this[p].length&&this[M](this.top),!0)}pop(){const t=this.top;return t&&this.remove(t),t}has(t){return this[p].indexOf(t)!==-1}[(I=p,v=w,S=E,M)](t){const i=this[E],s=this[w];if(!t){this[o](s),i.clear(),this[w]=[];return}const a=this[r](t);if(a[a.length-1].parentNode!==document.body)throw Error("Non-connected element cannot be a blocking element");this[w]=a;const c=this[d](t);if(!s.length){this[n](a,c,i);return}let l=s.length-1,h=a.length-1;for(;l>0&&h>0&&s[l]===a[h];)l--,h--;s[l]!==a[h]&&this[e](s[l],a[h]),l>0&&this[o](s.slice(0,l)),h>0&&this[n](a.slice(0,h),c,null)}[e](t,i){const s=t[u];this[f](t)&&!t.inert&&(t.inert=!0,s.add(t)),s.has(i)&&(i.inert=!1,s.delete(i)),i[_]=t[_],i[u]=s,t[_]=void 0,t[u]=void 0}[o](t){for(const i of t){const s=i[_];s.disconnect(),i[_]=void 0;const a=i[u];for(const c of a)c.inert=!1;i[u]=void 0}}[n](t,i,s){for(const a of t){const c=a.parentNode,l=c.children,h=new Set;for(let T=0;T<l.length;T++){const N=l[T];if(N===a||!this[f](N)||i&&i.has(N))continue;s&&N.inert?s.add(N):(N.inert=!0,h.add(N))}a[u]=h;const R=new MutationObserver(this[b].bind(this));a[_]=R;let g=c;const m=g;m.__shady&&m.host&&(g=m.host),R.observe(g,{childList:!0})}}[b](t){const i=this[w],s=this[E];for(const a of t){const c=a.target.host||a.target,l=c===document.body?i.length:i.indexOf(c),h=i[l-1],R=h[u];for(let g=0;g<a.removedNodes.length;g++){const m=a.removedNodes[g];if(m===h){console.info("Detected removal of the top Blocking Element."),this.pop();return}R.has(m)&&(m.inert=!1,R.delete(m))}for(let g=0;g<a.addedNodes.length;g++){const m=a.addedNodes[g];if(!this[f](m))continue;s&&m.inert?s.add(m):(m.inert=!0,R.add(m))}}}[f](t){return/^(style|template|script)$/.test(t.localName)===!1}[r](t){const i=[];let s=t;for(;s&&s!==document.body;){if(s.nodeType===Node.ELEMENT_NODE&&i.push(s),s.assignedSlot){for(;s=s.assignedSlot;)i.push(s);s=i.pop();continue}s=s.parentNode||s.host}return i}[d](t){const i=t.shadowRoot;if(!i)return null;const s=new Set;let a,c,l;const h=i.querySelectorAll("slot");if(h.length&&h[0].assignedNodes)for(a=0;a<h.length;a++)for(l=h[a].assignedNodes({flatten:!0}),c=0;c<l.length;c++)l[c].nodeType===Node.ELEMENT_NODE&&s.add(l[c]);return s}}document.$blockingElements=new y})(),function(){if(typeof window=="undefined")return;const I=Array.prototype.slice,v=Element.prototype.matches||Element.prototype.msMatchesSelector,S=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(",");class p{constructor(e,n){this._inertManager=n,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}destructor(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(e){this._unmanageNode(e.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}get managedNodes(){return new Set(this._managedNodes)}get hasSavedAriaHidden(){return this._savedAriaHidden!==null}set savedAriaHidden(e){this._savedAriaHidden=e}get savedAriaHidden(){return this._savedAriaHidden}_makeSubtreeUnfocusable(e){u(e,o=>this._visitNode(o));let n=document.activeElement;if(!document.body.contains(e)){let o=e,r;for(;o;){if(o.nodeType===Node.DOCUMENT_FRAGMENT_NODE){r=o;break}o=o.parentNode}r&&(n=r.activeElement)}e.contains(n)&&(n.blur(),n===document.activeElement&&document.body.focus())}_visitNode(e){if(e.nodeType!==Node.ELEMENT_NODE)return;const n=e;n!==this._rootElement&&n.hasAttribute("inert")&&this._adoptInertRoot(n),(v.call(n,S)||n.hasAttribute("tabindex"))&&this._manageNode(n)}_manageNode(e){const n=this._inertManager.register(e,this);this._managedNodes.add(n)}_unmanageNode(e){const n=this._inertManager.deregister(e,this);n&&this._managedNodes.delete(n)}_unmanageSubtree(e){u(e,n=>this._unmanageNode(n))}_adoptInertRoot(e){let n=this._inertManager.getInertRoot(e);n||(this._inertManager.setInert(e,!0),n=this._inertManager.getInertRoot(e)),n.managedNodes.forEach(function(o){this._manageNode(o.node)},this)}_onMutation(e,n){e.forEach(function(o){const r=o.target;if(o.type==="childList")I.call(o.addedNodes).forEach(function(d){this._makeSubtreeUnfocusable(d)},this),I.call(o.removedNodes).forEach(function(d){this._unmanageSubtree(d)},this);else if(o.type==="attributes"){if(o.attributeName==="tabindex")this._manageNode(r);else if(r!==this._rootElement&&o.attributeName==="inert"&&r.hasAttribute("inert")){this._adoptInertRoot(r);const d=this._inertManager.getInertRoot(r);this._managedNodes.forEach(function(f){r.contains(f.node)&&d._manageNode(f.node)})}}},this)}}class E{constructor(e,n){this._node=e,this._overrodeFocusMethod=!1,this._inertRoots=new Set([n]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}destructor(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){const e=this._node;this._savedTabIndex!==null?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}get destroyed(){return this._destroyed}_throwIfDestroyed(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}get hasSavedTabIndex(){return this._savedTabIndex!==null}get node(){return this._throwIfDestroyed(),this._node}set savedTabIndex(e){this._throwIfDestroyed(),this._savedTabIndex=e}get savedTabIndex(){return this._throwIfDestroyed(),this._savedTabIndex}ensureUntabbable(){if(this.node.nodeType!==Node.ELEMENT_NODE)return;const e=this.node;if(v.call(e,S)){if(e.tabIndex===-1&&this.hasSavedTabIndex)return;e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)}else e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}addInertRoot(e){this._throwIfDestroyed(),this._inertRoots.add(e)}removeInertRoot(e){this._throwIfDestroyed(),this._inertRoots.delete(e),this._inertRoots.size===0&&this.destructor()}}class w{constructor(e){if(!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),_(e.head||e.body||e.documentElement),e.readyState==="loading"?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}setInert(e,n){if(n){if(this._inertRoots.has(e))return;const o=new p(e,this);if(e.setAttribute("inert",""),this._inertRoots.set(e,o),!this._document.body.contains(e)){let r=e.parentNode;for(;r;)r.nodeType===11&&_(r),r=r.parentNode}}else{if(!this._inertRoots.has(e))return;const o=this._inertRoots.get(e);o.destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}getInertRoot(e){return this._inertRoots.get(e)}register(e,n){let o=this._managedNodes.get(e);return o!==void 0?o.addInertRoot(n):o=new E(e,n),this._managedNodes.set(e,o),o}deregister(e,n){const o=this._managedNodes.get(e);return o?(o.removeInertRoot(n),o.destroyed&&this._managedNodes.delete(e),o):null}_onDocumentLoaded(){const e=I.call(this._document.querySelectorAll("[inert]"));e.forEach(function(n){this.setInert(n,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}_watchForInert(e,n){const o=this;e.forEach(function(r){switch(r.type){case"childList":I.call(r.addedNodes).forEach(function(b){if(b.nodeType!==Node.ELEMENT_NODE)return;const y=I.call(b.querySelectorAll("[inert]"));v.call(b,"[inert]")&&y.unshift(b),y.forEach(function(t){this.setInert(t,!0)},o)},o);break;case"attributes":if(r.attributeName!=="inert")return;const d=r.target,f=d.hasAttribute("inert");o.setInert(d,f);break}},this)}}function u(e,n,o){if(e.nodeType==Node.ELEMENT_NODE){const d=e;n&&n(d);const f=d.shadowRoot;if(f){u(f,n);return}if(d.localName=="content"){const b=d,y=b.getDistributedNodes?b.getDistributedNodes():[];for(let t=0;t<y.length;t++)u(y[t],n);return}if(d.localName=="slot"){const b=d,y=b.assignedNodes?b.assignedNodes({flatten:!0}):[];for(let t=0;t<y.length;t++)u(y[t],n);return}}let r=e.firstChild;for(;r!=null;)u(r,n),r=r.nextSibling}function _(e){if(e.querySelector("style#inert-style, link#inert-style"))return;const n=document.createElement("style");n.setAttribute("id","inert-style"),n.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,e.appendChild(n)}const M=new w(document);Element.prototype.hasOwnProperty("inert")||Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){M.setInert(this,e)}})}();
