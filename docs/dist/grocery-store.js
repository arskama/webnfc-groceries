import{storage as s}from"../web_modules/kv-storage-polyfill/dist/kv-storage-polyfill.js";let r;export class GroceryStore extends EventTarget{constructor(){return super(),r||(r=this),r}async set(t,e){const a=await s.get(t);await s.set(t,JSON.stringify({note:e,done:!1})),this.dispatchEvent(new Event("change"))}async has(t){const e=await s.get(t);return!!e}async remove(t){await s.delete(t),this.dispatchEvent(new Event("change"))}async change(t,e){const a=await s.get(t);let n=JSON.parse(a);n.done=e,await s.set(t,JSON.stringify(n)),this.dispatchEvent(new Event("change"))}async*[Symbol.asyncIterator](){for await(let t of s.entries()){const[e,a]=t;let n=JSON.parse(a);n.name=e,yield n}}entries(){return this[Symbol.asyncIterator]()}}
